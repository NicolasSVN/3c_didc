<html>
  <head>
    <script type="text/javascript" src="https://svn3.lightning.force.com/support/api/63.0/lightning/opencti_min.js"></script>
    <script>
      let isClickToDialEnabled = false;
      var enableClickToDialCallback = function (response) {
        if (response.success) {
          isClickToDialEnabled = true;
          console.log(
            "API method call executed successfully! returnValue:",
            response.returnValue
          );
        } else {
          console.error("Something went wrong! Errors:", response.errors);
        }
      };

      var disableClickToDialCallback = function (response) {
        if (response.success) {
          console.log(
            "API method call executed successfully! returnValue:",
            response.returnValue
          );
        } else {
          console.error("Something went wrong! Errors:", response.errors);
        }
        isClickToDialEnabled = false;
      };
      function toggleClickToDial() {
        if (isClickToDialEnabled) {
          sforce.opencti.disableClickToDial({
            callback: disableClickToDialCallback,
          });
        } else {
          sforce.opencti.enableClickToDial({
            callback: enableClickToDialCallback,
          });
        }
      }
  function getUser() {
  sforce.opencti.getCallCenterSettings({
  callback: function(result) {
    if (result.success) {
      console.log("Call center settings:", result.returnValue);
    } else {
      console.error("Erro ao buscar settings:", result.errors);
    }
  }
});
  }
      
  // Executa ao abrir a janela
  window.onload = function () {
    toggleClickToDial();
  };
      
    </script>
  </head>
  <body>
      <button onclick="toggleClickToDial();">Toggle Click to Dial</button>
      <button onclick="getUser()">Get User Info</button>
  </body>
</html>
